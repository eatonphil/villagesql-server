# Test REPLACE INTO ... VALUES ROW(...) with COMPLEX type
# Grammar: REPLACE INTO tbl_name VALUES ROW(...)

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (
    id INT PRIMARY KEY,
    val COMPLEX
);

# Insert 5 initial rows
INSERT INTO t1 VALUES
    (1, '(1.0,2.0)'),
    (2, '(3.0,4.0)'),
    (3, '(5.0,6.0)'),
    (4, '(7.0,8.0)'),
    (5, '(9.0,10.0)');

SELECT * FROM t1 ORDER BY id;

# Replace using ROW constructor with 10 rows including zero variants
REPLACE INTO t1 VALUES
    ROW(1, '(11.0,12.0)'),
    ROW(2, '(0,0)'),
    ROW(3, '(-3.5,4.5)'),
    ROW(4, '(-0,0)'),
    ROW(5, '(13.0,-14.0)'),
    ROW(6, '(0,-0)'),
    ROW(7, '(-7.5,-8.5)'),
    ROW(8, '(-0,-0)'),
    ROW(9, '(15.0,16.0)'),
    ROW(10, '(0,0)');

SELECT * FROM t1 ORDER BY id;

# Replace single row using ROW constructor
REPLACE INTO t1 VALUES ROW(11, '(17.0,18.0)');

SELECT * FROM t1 ORDER BY id;

DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
