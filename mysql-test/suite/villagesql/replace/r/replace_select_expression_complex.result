CREATE TABLE t_source (
id INT PRIMARY KEY,
r DOUBLE,
i DOUBLE
);
INSERT INTO t_source VALUES
(1, 1.0, 2.0),
(2, 0.0, 0.0),
(3, -3.5, 4.5),
(4, -0.0, 0.0),
(5, 5.0, -6.0),
(6, 0.0, -0.0),
(7, -7.5, -8.5),
(8, -0.0, -0.0),
(9, 9.0, 10.0),
(10, 0.0, 0.0);
CREATE TABLE t_target (
id INT PRIMARY KEY,
val COMPLEX
);
INSERT INTO t_target VALUES (1, '(11.0,12.0)'), (3, '(13.0,14.0)'), (5, '(15.0,16.0)');
SELECT * FROM t_target ORDER BY id;
id	val
1	(11,12)
3	(13,14)
5	(15,16)
REPLACE INTO t_target (id, val)
SELECT id, CONCAT('(', r, ',', i, ')') FROM t_source;
ERROR HY000: Incorrect COMPLEX value: cannot implicitly cast string expression. Use explicit conversion for column 'val' at row 1
SELECT * FROM t_target ORDER BY id;
id	val
1	(11,12)
3	(13,14)
5	(15,16)
REPLACE INTO t_target (id, val)
SELECT id, VSQL_COMPLEX.COMPLEX_FROM_STRING(CONCAT('(', r, ',', i, ')')) FROM t_source;
SELECT * FROM t_target ORDER BY id;
id	val
1	(1,2)
2	(0,0)
3	(-3.5,4.5)
4	(0,0)
5	(5,-6)
6	(0,0)
7	(-7.5,-8.5)
8	(0,0)
9	(9,10)
10	(0,0)
DROP TABLE t_source;
DROP TABLE t_target;
