CREATE TABLE t1 (
id INT PRIMARY KEY,
name VARCHAR(50),
val COMPLEX,
age INT
);
CREATE TABLE audit_log (
table_id INT,
name VARCHAR(50)
);
CREATE PROCEDURE sp_insert_audit(IN p_id INT, IN p_name VARCHAR(50))
BEGIN
INSERT INTO audit_log (table_id, name) VALUES (p_id, p_name);
END//
CREATE PROCEDURE sp_get_names()
BEGIN
SELECT id, name FROM t1 ORDER BY id;
END//
CREATE PROCEDURE sp_with_custom_param(IN val_param COMPLEX)
BEGIN
SELECT val_param;
END//
ERROR HY000: Custom types are not yet supported in stored procedures/functions
CREATE PROCEDURE sp_get_custom(IN p_id INT)
BEGIN
SELECT id, val FROM t1 WHERE id = p_id;
END//
INSERT INTO t1 VALUES (1, 'Alice', '(1.0,2.0)', 25);
INSERT INTO t1 VALUES (2, 'Bob', '(3.0,4.0)', 30);
CALL sp_insert_audit(1, 'Alice');
SELECT * FROM audit_log;
table_id	name
1	Alice
CALL sp_get_names();
id	name
1	Alice
2	Bob
CALL sp_get_custom(1);
ERROR HY000: Custom types are not yet supported in stored procedures/functions
CALL sp_get_names();
id	name
1	Alice
2	Bob
DROP PROCEDURE sp_insert_audit;
DROP PROCEDURE sp_get_names;
DROP PROCEDURE sp_get_custom;
DROP TABLE t1;
DROP TABLE audit_log;
