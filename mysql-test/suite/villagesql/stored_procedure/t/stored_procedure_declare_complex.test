# Test DECLARE variable of COMPLEX type in Stored Procedure
# Grammar: DECLARE var_name COMPLEX ...

--source include/villagesql/not_implemented_complex_type.inc

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (val COMPLEX);

delimiter //;
CREATE PROCEDURE p1()
BEGIN
  DECLARE v1 COMPLEX DEFAULT '(0.0,0.0)';
  DECLARE v2 COMPLEX;
  
  SET v2 = '(1.0,2.0)';
  INSERT INTO t1 VALUES (v1);
  INSERT INTO t1 VALUES (v2);
END//
delimiter ;//

CALL p1();
SELECT * FROM t1;

DROP PROCEDURE p1;
DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
