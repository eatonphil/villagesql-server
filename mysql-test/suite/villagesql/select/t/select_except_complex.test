# Test EXCEPT with COMPLEX type
# Grammar: ... EXCEPT ...

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (val COMPLEX);
INSERT INTO t1 VALUES ('(1.0,2.0)'), ('(-0.0,-0)'), ('(0.0,-0.0)'), ('(1.0,2.0)'), ('(-0,0)'), ('(3.0,4.0)'), ('(0.0,0.0)');

CREATE TABLE t2 (val COMPLEX);
INSERT INTO t2 VALUES ('(3.0,4.0)'), ('(3.0,4.0)');

CREATE TABLE t3 (val COMPLEX);
INSERT INTO t3 VALUES ('(3.0,4.0)'), ('(-0,-0)'), ('(-0,-0)');

SELECT val FROM t1 EXCEPT SELECT val FROM t2 ORDER BY val;

SELECT val FROM t1 EXCEPT SELECT val FROM t3;

SELECT val FROM t2 EXCEPT SELECT val FROM t1;

SELECT val FROM t2 EXCEPT SELECT val FROM t3;

SELECT val FROM t3 EXCEPT SELECT val FROM t1;

SELECT val FROM t3 EXCEPT SELECT val FROM t2;

SELECT val FROM t1 EXCEPT SELECT val FROM t2 EXCEPT SELECT val from t3;

DROP TABLE t1;
DROP TABLE t2;
DROP TABLE t3;

--source include/villagesql/uninstall_complex_extension.inc
