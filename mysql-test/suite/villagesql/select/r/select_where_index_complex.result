CREATE TABLE t1 (
id INT PRIMARY KEY,
val COMPLEX,
INDEX idx_val (val)
);
INSERT INTO t1 VALUES
(1, '(0.0,0.0)'),           # Zero
(2, '(1.0,2.0)'),           # Regular positive
(3, '(3.0,4.0)'),           # Medium positive
(4, '(5.0,6.0)'),           # Medium positive
(5, '(-1.0,-2.0)'),         # Negative both
(6, '(-5.0,3.0)'),          # Negative real, positive imaginary
(7, '(2.0,-7.0)'),          # Positive real, negative imaginary
(8, '(3.0,1.0)'),           # Same real as id=3, different imaginary
(9, '(1.5e100,2.3e100)'),   # Very large positive
(10, '(-1.5e100,-2.3e100)'), # Very large negative
(11, '(4.22e-10,3.14e-15)'), # Very small positive
(12, '(-1.17e-9,-8.88e-12)');
EXPLAIN SELECT id FROM t1 WHERE val = '(3.0,4.0)';
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t1	NULL	ref	idx_val	idx_val	19	const	1	100.00	Using where; Using index
Warnings:
Note	1003	/* select#1 */ select `test`.`t1`.`id` AS `id` from `test`.`t1` where (`test`.`t1`.`val` = '(3,4)')
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '( 3.0, 4.0 )';
id
3
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '(0.0,0.0)';
id
1
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '(-1.0,-2.0)';
id
5
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '(-1.0,0.0)';
id
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '(1.5e100,2.3e100)';
id
9
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val = '(4.22e-10,3.14e-15)';
id
11
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val > '(2.0,3.0)' ORDER BY id;
id
3
4
8
9
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val > '(0.0,0.0)' ORDER BY id;
id
2
3
4
7
8
9
11
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val > '(-1.0,0.0)' ORDER BY id;
id
1
2
3
4
7
8
9
11
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val < '(3.0,4.0)' ORDER BY id;
id
1
2
5
6
7
8
10
11
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val < '(0.0,0.0)' ORDER BY id;
id
5
6
10
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val >= '(3.0,4.0)' ORDER BY id;
id
3
4
9
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val <= '(1.0,2.0)' ORDER BY id;
id
1
2
5
6
10
11
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val BETWEEN '(0.0,0.0)' AND '(3.0,5.0)' ORDER BY id;
id
1
2
3
7
8
11
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val BETWEEN '(-5.0,0.0)' AND '(5.0,0.0)' ORDER BY id;
id
1
2
3
5
6
7
8
11
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val > '(3.0,0.0)' ORDER BY id;
id
3
4
8
9
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val < '(3.0,5.0)' ORDER BY id;
id
1
2
3
5
6
7
8
10
11
12
SELECT id FROM t1 FORCE INDEX(idx_val) WHERE val BETWEEN '(3.0,0.0)' AND '(3.0,5.0)' ORDER BY id;
id
3
8
INSERT INTO t1 VALUES (13, NULL);
SELECT id FROM t1 WHERE val IS NULL;
id
13
SELECT id FROM t1 WHERE val IS NOT NULL ORDER BY id LIMIT 5;
id
1
2
3
4
5
DROP TABLE t1;
