# Test UPDATE ... WHERE with inequality operators on COMPLEX type
# Grammar: UPDATE ... WHERE ... (with !=, <, >, <=, >=, BETWEEN)

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (
    id INT PRIMARY KEY,
    val COMPLEX
);

# Insert test data with varied values
INSERT INTO t1 VALUES
    (1, '(-20.0,0.0)'),
    (2, '(-10.0,-10.0)'),
    (3, '(-5.0,5.0)'),
    (4, '(0,0)'),
    (5, '(5.0,-5.0)'),
    (6, '(10.0,0.0)'),
    (7, '(10.0,10.0)'),
    (8, '(20.0,0.0)'),
    (9, '(1.0,2.0)'),
    (10, '(1.0,2.0)');

# Test != (not equal)
UPDATE t1 SET val = '(99.0,99.0)' WHERE val != '(1.0,2.0)';

SELECT * FROM t1 ORDER BY id;

# Test < (less than)
UPDATE t1 SET val = '(-100.0,-100.0)' WHERE val < '(50.0,50.0)';

SELECT * FROM t1 ORDER BY id;

# Test > (greater than)
UPDATE t1 SET val = '(100.0,100.0)' WHERE val > '(50.0,50.0)';

SELECT * FROM t1 ORDER BY id;

# Test <= (less than or equal)
UPDATE t1 SET val = '(-200.0,-200.0)' WHERE val <= '(-100.0,-100.0)';

SELECT * FROM t1 ORDER BY id;

# Test >= (greater than or equal)
UPDATE t1 SET val = '(200.0,200.0)' WHERE val >= '(100.0,100.0)';

SELECT * FROM t1 ORDER BY id;

# Test BETWEEN
UPDATE t1 SET val = '(88.0,88.0)' WHERE val BETWEEN '(-250.0,-250.0)' AND '(-150.0,-150.0)';

SELECT * FROM t1 ORDER BY id;

DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
