# Create a temporary table with a COMPLEX column
CREATE TEMPORARY TABLE temp_complex (
id INT PRIMARY KEY,
value COMPLEX
);
# Verify the temporary table exists and has the right structure
SHOW COLUMNS FROM temp_complex;
Field	Type	Null	Key	Default	Extra
id	int	NO	PRI	NULL	NULL
value	vsql_complex.COMPLEX	YES		NULL	NULL
# Insert some data to ensure the table is actively using the type
INSERT INTO temp_complex VALUES (1, '(1.0,2.0)');
SELECT * FROM temp_complex;
id	value
1	(1,2)
# Try to uninstall the extension - should fail because temp table uses COMPLEX type
UNINSTALL EXTENSION vsql_complex;
ERROR HY000: Cannot uninstall extension 'vsql_complex': type 'COMPLEX' is currently in use
# Verify the extension is still installed
SELECT * FROM INFORMATION_SCHEMA.EXTENSIONS WHERE EXTENSION_NAME = 'vsql_complex';
EXTENSION_NAME	EXTENSION_VERSION
vsql_complex	0.0.1
# Drop the temporary table
DROP TEMPORARY TABLE temp_complex;
# Now uninstall should succeed
UNINSTALL EXTENSION vsql_complex;
# Verify the extension was removed
SELECT * FROM INFORMATION_SCHEMA.EXTENSIONS WHERE EXTENSION_NAME = 'vsql_complex';
EXTENSION_NAME	EXTENSION_VERSION
