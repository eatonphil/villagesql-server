# Test DROP TABLE IF EXISTS with COMPLEX columns
# Grammar: DROP TABLE IF EXISTS table_name

--source include/villagesql/install_complex_extension.inc
--source include/villagesql/binlog_check_begin.inc

CREATE TABLE t1 (
    id INT PRIMARY KEY,
    value COMPLEX
);

# Verify the entry in custom columns is present
--source include/villagesql/query_custom_columns.inc

INSERT INTO t1 VALUES (1, '(1.0,2.0)');

# Drop existing table
DROP TABLE IF EXISTS t1;

# Verify the entry in custom columns no longer present
--source include/villagesql/query_custom_columns.inc

# Drop non-existing table (should not error)
DROP TABLE IF EXISTS t1;

# Verify the entry in custom columns still not present
--source include/villagesql/query_custom_columns.inc

# Verify table no longer exists
SHOW TABLES LIKE 't1';

--source include/villagesql/binlog_check_end.inc
--source include/villagesql/uninstall_complex_extension.inc
