# Test LOAD DATA ... FIELDS TERMINATED BY ... with COMPLEX type
# Grammar: LOAD DATA ... FIELDS TERMINATED BY ...

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (id INT, val COMPLEX);

--write_file $MYSQLTEST_VARDIR/tmp/complex_term.dat
1|(1.0,2.0)
2|(2.0,3.0)
3|(0.0,-0.0)
5|(-3.0,-4.0)
8|(13e13,14.0)
EOF

--replace_result $MYSQLTEST_VARDIR MYSQLTEST_VARDIR
--eval LOAD DATA INFILE '$MYSQLTEST_VARDIR/tmp/complex_term.dat' INTO TABLE t1 FIELDS TERMINATED BY '|'

SELECT * FROM t1 ORDER BY id;

DROP TABLE t1;
--remove_file $MYSQLTEST_VARDIR/tmp/complex_term.dat

--source include/villagesql/uninstall_complex_extension.inc
