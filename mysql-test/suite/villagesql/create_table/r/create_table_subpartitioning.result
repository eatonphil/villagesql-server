CREATE TABLE subpartitioned_table (
id INT,
year_val INT,
complex_data COMPLEX,
device_id INT,
measurement_type VARCHAR(50),
PRIMARY KEY(id, year_val, device_id)
) PARTITION BY RANGE (year_val)
SUBPARTITION BY HASH (device_id)
SUBPARTITIONS 2 (
PARTITION p_2022 VALUES LESS THAN (2023),
PARTITION p_2023 VALUES LESS THAN (2024),
PARTITION p_future VALUES LESS THAN MAXVALUE
);
SHOW COLUMNS FROM subpartitioned_table;
Field	Type	Null	Key	Default	Extra
id	int	NO	PRI	NULL	
year_val	int	NO	PRI	NULL	
complex_data	vsql_complex.COMPLEX	YES		NULL	
device_id	int	NO	PRI	NULL	
measurement_type	varchar(50)	YES		NULL	
INSERT INTO subpartitioned_table VALUES (1, 2022, '(87.0,88.0)', 101, 'temperature');
INSERT INTO subpartitioned_table VALUES (2, 2023, '(89.0,90.0)', 102, 'pressure');
INSERT INTO subpartitioned_table VALUES (3, 2023, '(91.0,92.0)', 103, 'humidity');
INSERT INTO subpartitioned_table VALUES (4, 2024, '(93.0,94.0)', 104, 'voltage');
SELECT * FROM subpartitioned_table ORDER BY id;
id	year_val	complex_data	device_id	measurement_type
1	2022	(87,88)	101	temperature
2	2023	(89,90)	102	pressure
3	2023	(91,92)	103	humidity
4	2024	(93,94)	104	voltage
DROP TABLE subpartitioned_table;
include/rpl/deprecated/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
#	#	Query	#	#	use `test`; CREATE TABLE `subpartitioned_table` (
  `id` int NOT NULL,
  `year_val` int NOT NULL,
  `complex_data` vsql_complex.COMPLEX DEFAULT NULL,
  `device_id` int NOT NULL,
  `measurement_type` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`,`year_val`,`device_id`)
)
/*!50100 PARTITION BY RANGE (`year_val`)
SUBPARTITION BY HASH (`device_id`)
SUBPARTITIONS 2
(PARTITION p_2022 VALUES LESS THAN (2023) ENGINE = InnoDB,
 PARTITION p_2023 VALUES LESS THAN (2024) ENGINE = InnoDB,
 PARTITION p_future VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.subpartitioned_table)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.subpartitioned_table)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.subpartitioned_table)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.subpartitioned_table)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	use `test`; DROP TABLE `subpartitioned_table` /* generated by server */
