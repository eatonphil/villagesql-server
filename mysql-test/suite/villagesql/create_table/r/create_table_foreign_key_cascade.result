CREATE TABLE signal_sources (
source_id INT PRIMARY KEY,
source_name VARCHAR(100)
);
INSERT INTO signal_sources VALUES (1, 'generator_1');
INSERT INTO signal_sources VALUES (2, 'generator_2');
CREATE TABLE signal_readings (
reading_id INT PRIMARY KEY,
source_id INT,
complex_signal COMPLEX,
amplitude DOUBLE,
FOREIGN KEY (source_id) REFERENCES signal_sources(source_id)
ON DELETE CASCADE ON UPDATE CASCADE
);
SHOW COLUMNS FROM signal_readings;
Field	Type	Null	Key	Default	Extra
reading_id	int	NO	PRI	NULL	
source_id	int	YES	MUL	NULL	
complex_signal	vsql_complex.COMPLEX	YES		NULL	
amplitude	double	YES		NULL	
INSERT INTO signal_readings VALUES (1, 1, '(111.0,112.0)', 15.6);
INSERT INTO signal_readings VALUES (2, 1, '(113.0,114.0)', 18.2);
INSERT INTO signal_readings VALUES (3, 2, '(115.0,116.0)', 22.1);
SELECT * FROM signal_readings ORDER BY reading_id;
reading_id	source_id	complex_signal	amplitude
1	1	(111,112)	15.6
2	1	(113,114)	18.2
3	2	(115,116)	22.1
UPDATE signal_sources SET source_id = 10 WHERE source_id = 1;
SELECT * FROM signal_readings ORDER BY reading_id;
reading_id	source_id	complex_signal	amplitude
1	10	(111,112)	15.6
2	10	(113,114)	18.2
3	2	(115,116)	22.1
DELETE FROM signal_sources WHERE source_id = 2;
SELECT * FROM signal_readings ORDER BY reading_id;
reading_id	source_id	complex_signal	amplitude
1	10	(111,112)	15.6
2	10	(113,114)	18.2
DROP TABLE signal_readings;
DROP TABLE signal_sources;
include/rpl/deprecated/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
#	#	Query	#	#	use `test`; CREATE TABLE signal_sources (
source_id INT PRIMARY KEY,
source_name VARCHAR(100)
)
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_sources)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_sources)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	use `test`; CREATE TABLE `signal_readings` (
  `reading_id` int NOT NULL,
  `source_id` int DEFAULT NULL,
  `complex_signal` vsql_complex.COMPLEX DEFAULT NULL,
  `amplitude` double DEFAULT NULL,
  PRIMARY KEY (`reading_id`),
  KEY `source_id` (`source_id`),
  CONSTRAINT `signal_readings_ibfk_1` FOREIGN KEY (`source_id`) REFERENCES `signal_sources` (`source_id`) ON DELETE CASCADE ON UPDATE CASCADE
)
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_readings)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_readings)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_readings)
#	#	Write_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_sources)
#	#	Update_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	BEGIN
#	#	Table_map	#	#	table_id: # (test.signal_sources)
#	#	Delete_rows	#	#	table_id: # flags: STMT_END_F
#	#	Xid	#	#	COMMIT /* XID */
#	#	Query	#	#	use `test`; DROP TABLE `signal_readings` /* generated by server */
#	#	Query	#	#	use `test`; DROP TABLE `signal_sources` /* generated by server */
