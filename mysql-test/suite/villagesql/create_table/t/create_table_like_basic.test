# Test CREATE TABLE LIKE with COMPLEX type
# Grammar: CREATE TABLE table_name LIKE other_table

# Create source table with COMPLEX type
--source include/villagesql/install_complex_extension.inc
--source include/villagesql/binlog_check_begin.inc

CREATE TABLE source_table (
    id INT PRIMARY KEY,
    complex_col COMPLEX,
    name VARCHAR(50)
);

INSERT INTO source_table VALUES (1, '(1.0,2.0)', 'test1');

--source include/villagesql/query_custom_columns.inc

# Create table using LIKE
CREATE TABLE t1 LIKE source_table;

SHOW CREATE TABLE t1;

INSERT INTO t1 VALUES (1, '(3.0,4.0)', 'copy1');
INSERT INTO t1 VALUES (2, '(5.0,6.0)', 'copy2');

SELECT * FROM t1;

--source include/villagesql/query_custom_columns.inc

DROP TABLE t1;
DROP TABLE source_table;

--source include/villagesql/binlog_check_end.inc
--source include/villagesql/uninstall_complex_extension.inc
