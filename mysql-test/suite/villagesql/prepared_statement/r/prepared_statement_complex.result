CREATE TABLE t1 (
id INT PRIMARY KEY,
name VARCHAR(50),
val COMPLEX
);
PREPARE stmt_non_custom FROM 'SELECT id, name FROM t1 WHERE id = ?';
SET @id = 1;
EXECUTE stmt_non_custom USING @id;
id	name
DROP PREPARE stmt_non_custom;
PREPARE stmt_select_custom FROM 'SELECT val FROM t1';
ERROR HY000: Custom types are not yet supported in prepared statements
PREPARE stmt_insert_custom FROM 'INSERT INTO t1 VALUES (?, ?, ?)';
ERROR HY000: Custom types are not yet supported in prepared statements
PREPARE stmt_where_custom FROM 'SELECT id FROM t1 WHERE val = ?';
ERROR HY000: Cannot compare values of custom and non-custom types in =
DROP TABLE t1;
CREATE TABLE t2 (
id INT PRIMARY KEY,
name VARCHAR(50),
val COMPLEX INVISIBLE
);
INSERT INTO t2 (id, val, name) VALUES (1, '(1.0,2.0)', 'test1'), (2, '(3.0,4.0)', 'test2');
PREPARE stmt_select_non_custom_visible FROM 'SELECT id, name FROM t2 WHERE id = ?';
SET @id = 1;
EXECUTE stmt_select_non_custom_visible USING @id;
id	name
1	test1
DROP PREPARE stmt_select_non_custom_visible;
PREPARE stmt_select_invisible FROM 'SELECT id, val, name FROM t2';
ERROR HY000: Custom types are not yet supported in prepared statements
PREPARE stmt_where_invisible FROM 'SELECT id, name FROM t2 WHERE val = ?';
ERROR HY000: Cannot compare values of custom and non-custom types in =
PREPARE stmt_order_invisible FROM 'SELECT id, name FROM t2 ORDER BY val';
ERROR HY000: Custom types are not yet supported in prepared statements
PREPARE stmt_insert_invisible FROM 'INSERT INTO t2 (id, val, name) VALUES (?, ?, ?)';
ERROR HY000: Custom types are not yet supported in prepared statements
PREPARE stmt_select_star FROM 'SELECT * FROM t2 WHERE id = ?';
ERROR HY000: Custom types are not yet supported in prepared statements
DROP TABLE t2;
