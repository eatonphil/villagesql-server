# Test simple nested VIEW (view on view) with COMPLEX column

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (id INT PRIMARY KEY, val COMPLEX, amount DECIMAL(10,2));

INSERT INTO t1 VALUES
  (1, '(1,2)', 100.50),
  (2, '(3,4)', 200.75),
  (3, '(5,6)', 150.25);

# Create first-level view
CREATE VIEW v1 AS
SELECT id, val, amount FROM t1;

# Query the nested view
SELECT * FROM v1 ORDER BY id;

DROP VIEW v1;
DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
