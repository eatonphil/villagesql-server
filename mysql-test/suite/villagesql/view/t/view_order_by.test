# Test VIEW with ORDER BY on COMPLEX column
# This test verifies ordering/sorting on COMPLEX columns in views
# Uses values that differentiate semantic ordering from string ordering:
# - (2,0) vs (10,0): String would give (10,0) first, semantic gives (2,0) first
# - (-10,0) vs (-1,0): String would give (-1,0) first, semantic gives (-10,0) first
# - (2,-5) vs (2,-10): String would give (2,-10) first, semantic gives (2,-10) first (same!)
# - (0,-1) vs (0,-10): String would give (0,-1) first, semantic gives (0,-10) first

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (id INT PRIMARY KEY, val COMPLEX, name VARCHAR(50));

INSERT INTO t1 VALUES
  (1, '(10,0)', 'ten'),
  (2, '(2,0)', 'two'),
  (3, '(-1,0)', 'minus_one'),
  (4, '(-10,0)', 'minus_ten'),
  (5, '(0,0)', 'zero'),
  (6, '(2,-5)', 'two_minus_five'),
  (7, '(0,-1)', 'zero_minus_one'),
  (8, '(0,-10)', 'zero_minus_ten');

# Create view with ORDER BY on COMPLEX column
CREATE VIEW v_ordered AS
SELECT id, val, name FROM t1 ORDER BY val;

SELECT * FROM v_ordered;

DROP VIEW v_ordered;
DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
