# Test CAST/CONVERT with COMPLEX type
# Grammar: CAST(expr AS type); CONVERT(expr, type)
# Explicit CAST to/from COMPLEX is NOT supported

--source include/villagesql/install_complex_extension.inc

# String to Complex - CAST AS COMPLEX is a parse error (not a valid CAST target)
--error ER_PARSE_ERROR
SELECT CAST('(1.0,2.0)' AS COMPLEX);

--error ER_PARSE_ERROR
SELECT CONVERT('(1.0,2.0)', COMPLEX);

CREATE TABLE t1 (val COMPLEX);
INSERT INTO t1 VALUES ('(1.0,2.0)');

# Complex to String - not supported
--error ER_WRONG_USAGE
SELECT CAST(val AS CHAR(50)) FROM t1;

--error ER_WRONG_USAGE
SELECT CONVERT(val, CHAR(50)) FROM t1;

DROP TABLE t1;

--source include/villagesql/uninstall_complex_extension.inc
